<!DOCTYPE html>
<html>

  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="theme-color" content="#22365A">
	<title>X2.07 16340190-Axios简介 - Niffler</title>

	<link rel="shortcut icon" href="/styles/images/logo.png">
	<link rel="icon" href="/styles/images/logo.png">

	<link rel="stylesheet" href="/styles/css/index.css">
	<link rel="stylesheet" href="/styles/css/fontawesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/styles/css/syntax.css">
	<link rel="canonical" href="/x2.%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%B7%A5%E4%BD%9C%E6%8A%A5%E5%91%8A/X2.07.16340190-Axios%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D/">
	<link rel="alternate" type="application/rss+xml" title="Niffler" href="/feed.xml">
	
	<meta name="keywords" content="X2.07 16340190-Axios简介, Niffler, Niffler">
	<meta name="description" content="Niffler">

	<script src="/styles/js/jquery.min.js"></script>
	<!--[if lt IE 9]>
    	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  	<![endif]-->
  	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "//hm.baidu.com/hm.js?94be4b0f9fc5d94cc0d0415ea6761ae9";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>
  	<style type="text/css">
	  	.docs-content{
	  		margin-bottom: 10px;
	  	}
  	</style>
</head>

  <body class="index">

    <header class="navbar navbar-inverse navbar-fixed-top docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">
        <img src="/styles/images/logo-header.png">
      </a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">    
        <li>
          <a href="/">圈多多</a>
        </li>
        <!-- <li>
          <a href="/categories/">大类分解</a>
        </li>
        <li>
          <a href="/tag">小类内聚</a>
        </li> -->
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/sysu-swsad-team">Github</a></li>
       
      </ul>
    </nav>
  </div>
</header>
    <div class="docs-header" id="content">
  <div class="container">
  	
  		<!--
		    <h1>X2.07 16340190-Axios简介</h1>
		    <p>Post on Mar 18, 2019 by <a href="/about">sysu-swsad-team</a></p>
		-->
		    <h1>Niffler</h1>
    
  </div>
</div>
    
      
<div class="banner">
  <div class="container">
  	
    	<a href="/categories/#X2.技术与工作报告-ref">X2.技术与工作报告</a>	/
      <!-- <a href="/tag/#-ref"></a> -->
      <span>X2.07 16340190-Axios简介</span>
    
  </div>
</div>

    

    <div class="container docs-container">
  <div class="row">
    <div class="col-md-3">
      <div class="sidebar hidden-print" role="complementary">
        <div id="navigation">
  <h1>目录</h1>
  <ul class="nav sidenav">
  </ul>
  <!-- <div style="height: 200px;width: 200px;">
    <script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=&amp;m=0&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33" async="async"> 
    </script>
  </div> -->
</div>

 
      </div>
    </div>
    <div class="col-md-9" role="main">
      <div class="panel docs-content">
        <div class="wrapper">
            <header class="post-header">
              <h1 class="post-title">X2.07 16340190-Axios简介</h1>
              <!--
                <p class="post-meta">Mar 18, 2019 • 16340190</p>
              -->
              <!-- <div class="meta">Posted on <span class="postdate">Mar 18, 2019</span> By <a target="_blank" href="https://sysu-swsad-team.github.io/">sysu-swsad-team</a></div> -->
              <div class="meta">Posted By <a target="_blank" href="https://github.com/freesdw">16340190</a></div>
              <br />
            </header>
            <article class="post-content">
              <ul id="markdown-toc">
  <li><a href="#axios" id="markdown-toc-axios">Axios</a>    <ul>
      <li><a href="#安装" id="markdown-toc-安装">安装</a></li>
      <li><a href="#基本使用说明" id="markdown-toc-基本使用说明">基本使用说明</a></li>
      <li><a href="#通过向-axios-传递相关配置来创建请求" id="markdown-toc-通过向-axios-传递相关配置来创建请求">通过向 axios 传递相关配置来创建请求</a></li>
      <li><a href="#实例创建" id="markdown-toc-实例创建">实例创建</a></li>
      <li><a href="#请求配置" id="markdown-toc-请求配置">请求配置</a></li>
      <li><a href="#响应结构" id="markdown-toc-响应结构">响应结构</a></li>
      <li><a href="#配置默认值" id="markdown-toc-配置默认值">配置默认值</a></li>
    </ul>
  </li>
  <li><a href="#vue-axios基本用法" id="markdown-toc-vue-axios基本用法">Vue-axios基本用法</a>    <ul>
      <li><a href="#安装-1" id="markdown-toc-安装-1">安装</a></li>
    </ul>
  </li>
  <li><a href="#带cookie请求问题" id="markdown-toc-带cookie请求问题">带cookie请求问题</a></li>
  <li><a href="#vue-axios-plugin" id="markdown-toc-vue-axios-plugin">vue-axios-plugin</a>    <ul>
      <li><a href="#导入" id="markdown-toc-导入">导入</a></li>
    </ul>
  </li>
  <li><a href="#拦截器" id="markdown-toc-拦截器">拦截器</a></li>
</ul>

<h2 id="axios">Axios</h2>
<p><strong>基于promise用于浏览器和node.js的http客户端</strong>
其特点为：</p>
<ul>
  <li>支持浏览器和node.js</li>
  <li>支持promise</li>
  <li>能拦截请求和响应</li>
  <li>能转换请求和响应数据</li>
  <li>能取消请求</li>
  <li>自动转换JSON数据</li>
  <li>浏览器端支持防止CSRF（跨站请求伪造）
    <h3 id="安装">安装</h3>
  </li>
  <li>使用npm</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="n">npm</span> <span class="n">install</span> <span class="n">axios</span>
</code></pre></div></div>
<ul>
  <li>使用bower</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="n">bower</span> <span class="n">install</span> <span class="n">axios</span>
</code></pre></div></div>
<ul>
  <li>使用cdn</li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/axios/dist/axios.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div></div>
<h3 id="基本使用说明">基本使用说明</h3>
<ul>
  <li>执行 GET 请求</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/user</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">ID</span><span class="p">:</span> <span class="mi">12345</span>
    <span class="p">}</span>
  <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
  <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">})</span>
</code></pre></div></div>
<ul>
  <li>执行 POST 请求</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/user</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Fred</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Flintstone</span><span class="dl">'</span>
  <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
  <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">})</span>
</code></pre></div></div>
<ul>
  <li>执行多个并发请求</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">getUserAccount</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/user/12345</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">getUserPermissions</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/user/12345/permissions</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span><span class="nx">getUserAccount</span><span class="p">(),</span> <span class="nx">getUserPermissions</span><span class="p">()])</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">axios</span><span class="p">.</span><span class="nx">spread</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">acct</span><span class="p">,</span> <span class="nx">perms</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 两个请求现在都执行完成</span>
  <span class="p">}));</span>
</code></pre></div></div>
<h3 id="通过向-axios-传递相关配置来创建请求">通过向 axios 传递相关配置来创建请求</h3>
<ul>
  <li><strong>axios(config)</strong></li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 发送 POST 请求</span>
<span class="nx">axios</span><span class="p">({</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/user/12345</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Fred</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Flintstone</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>
<ul>
  <li><strong>axios(url[, config])</strong></li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 发送 GET 请求（默认的方法）</span>
<span class="nx">axios</span><span class="p">(</span><span class="dl">'</span><span class="s1">/user/12345</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>
<ul>
  <li><strong>方法别名</strong></li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 在使用别名方法时， url、method、data 这些属性都不必在配置中指定。</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">config</span><span class="p">])</span>
<span class="nx">axios</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">config</span><span class="p">])</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">head</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">config</span><span class="p">])</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">options</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">config</span><span class="p">])</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">data</span><span class="p">[,</span> <span class="nx">config</span><span class="p">]])</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">data</span><span class="p">[,</span> <span class="nx">config</span><span class="p">]])</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">patch</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">data</span><span class="p">[,</span> <span class="nx">config</span><span class="p">]])</span>

<span class="c1">// 处理并发请求的助手函数</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">iterable</span><span class="p">)</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">spread</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="实例创建">实例创建</h3>
<ul>
  <li><strong>axios.create([config])</strong></li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">instance</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">baseURL</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://some-domain.com/api/</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">timeout</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">X-Custom-Header</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">foobar</span><span class="dl">'</span><span class="p">}</span>
<span class="p">})</span>
<span class="c1">// 可用的实例方法</span>
<span class="nx">axios</span><span class="err">#</span><span class="nx">request</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<span class="nx">axios</span><span class="err">#</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">config</span><span class="p">])</span>
<span class="nx">axios</span><span class="err">#</span><span class="k">delete</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">config</span><span class="p">])</span>
<span class="nx">axios</span><span class="err">#</span><span class="nx">head</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">config</span><span class="p">])</span>
<span class="nx">axios</span><span class="err">#</span><span class="nx">options</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">config</span><span class="p">])</span>
<span class="nx">axios</span><span class="err">#</span><span class="nx">post</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">data</span><span class="p">[,</span> <span class="nx">config</span><span class="p">]])</span>
<span class="nx">axios</span><span class="err">#</span><span class="nx">put</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">data</span><span class="p">[,</span> <span class="nx">config</span><span class="p">]])</span>
<span class="nx">axios</span><span class="err">#</span><span class="nx">patch</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span> <span class="nx">data</span><span class="p">[,</span> <span class="nx">config</span><span class="p">]])</span>
</code></pre></div></div>
<h3 id="请求配置">请求配置</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
<span class="c1">// url 必须的，用于请求的服务器URL</span>
<span class="nl">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/user</span><span class="dl">'</span><span class="p">,</span>

<span class="c1">// 创建请求时使用的方法，如果没有指定，将默认使用get</span>
<span class="nx">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span>

<span class="c1">// baseURL将自动加载url前，除非‘url’是一个绝对url</span>
<span class="c1">// 可以通过设置一个‘baseURL’便于为axios实例的方法传递相对url</span>
<span class="nx">baseURL</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://baseurl.com/api/</span><span class="dl">'</span><span class="p">,</span>

<span class="c1">// transformRequest允许在向服务器发送前，修改请求数据，只能用‘PUT’，‘POST’和</span>
<span class="c1">// ‘PATCH’这几个请求方法。后面数组中的函数必须返回一个字符串或ArrayBuffer或Steam</span>
<span class="nx">transformRequest</span><span class="p">:</span> <span class="p">[</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">headers</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 对data进行任意转换处理</span>
  <span class="k">return</span> <span class="nx">data</span>
<span class="p">}],</span>

<span class="c1">// transformResponse在传递给then/catch前，允许修改响应数据</span>
<span class="nx">transformResponse</span><span class="p">:</span> <span class="p">[</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 对data进行任意转换处理</span>
  <span class="k">return</span> <span class="nx">data</span>
<span class="p">}],</span>

<span class="c1">// 即将被发送的自定义请求头</span>
<span class="nx">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">X-Requested-With</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">XMLHttpRequest</span><span class="dl">'</span><span class="p">},</span>

<span class="c1">// 即将与请求一起发送的URL参数，必须是一个无格式对象或URLSearchParams对象</span>
<span class="nx">params</span><span class="p">:</span> <span class="p">{</span>
  <span class="nl">ID</span><span class="p">:</span> <span class="mi">12345</span>
<span class="p">},</span>

<span class="c1">// 负责 `params` 序列化的函数</span>
  <span class="nx">paramsSerializer</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="p">{</span><span class="na">arrayFormat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">brackets</span><span class="dl">'</span><span class="p">})</span>
  <span class="p">},</span>

<span class="c1">// 作为请求主体被发送的数据,只适用于 'PUT', 'POST', 和 'PATCH'</span>
<span class="c1">// 在没有设置 `transformRequest` 时，必须是以下类型之一：</span>
<span class="c1">// - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span>
<span class="c1">// - 浏览器专属：FormData, File, Blob</span>
<span class="c1">// - Node 专属： Stream</span>
<span class="nx">data</span><span class="p">:</span> <span class="p">{</span>
  <span class="nl">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Fred</span><span class="dl">'</span>
<span class="p">},</span>

<span class="c1">// 指定请求超时的毫秒数(0 表示无超时时间), 如果请求话费了超过 `timeout` 的时间，请求将被中断</span>
<span class="nx">timeout</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>

<span class="c1">// 跨域请求时是否需要使用凭证,默认为false</span>
<span class="nx">withCredentials</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>

<span class="c1">// `adapter` 允许自定义处理请求，以使测试更轻松，返回一个 promise 并应用一个有效的响应 (查阅 [response docs](#response-api)).</span>
<span class="nx">adapter</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* ... */</span>
<span class="p">},</span>

<span class="c1">// `auth` 表示应该使用 HTTP 基础验证，并提供凭据</span>
<span class="c1">// 将设置一个 `Authorization` 头，覆写掉现有的任意使用 `headers` 设置的自定义 `Authorization`头</span>
<span class="nx">auth</span><span class="p">:</span> <span class="p">{</span>
  <span class="nl">username</span><span class="p">:</span> <span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">password</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a1234t</span><span class="dl">'</span>
<span class="p">},</span>

<span class="c1">// 服务器响应的数据类型，可以是 'arraybuffer', 'blob', 'document', 'json', 'text', 'stream'</span>
<span class="nx">responseType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">json</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// default</span>

<span class="nx">responseEncoding</span><span class="p">:</span> <span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// default</span>

<span class="c1">// `xsrfCookieName` 是用作 xsrf token 的值的cookie的名称</span>
<span class="nx">xsrfCookieName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">XSRF-TOKEN</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// default</span>

<span class="c1">// 带有xsrf的http头部的token值</span>
<span class="nx">xsrfHeaderName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">X-XSRF-TOKEN</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// default</span>

<span class="c1">// 为上传处理进度事件</span>
<span class="nx">onUploadProgress</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">progressEvent</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Do whatever you want with the native progress event</span>
<span class="p">},</span>

<span class="c1">// 为下载处理进度事件</span>
<span class="nx">onDownloadProgress</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">progressEvent</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 对原生进度事件的处理</span>
<span class="p">},</span>

<span class="c1">// 允许的响应内容的最大尺寸</span>
<span class="nx">maxContentLength</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>

<span class="c1">// 定义对于给定的HTTP 响应状态码是 resolve 或 reject  promise 。如果 `validateStatus` 返回 `true` (或者设置为 `null` 或 `undefined`)，promise 将被 resolve; 否则，promise 将被 rejecte</span>
<span class="nx">validateStatus</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">status</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">;</span> <span class="c1">// default</span>
<span class="p">},</span>

<span class="c1">// 在 node.js 中 follow 的最大重定向数目,如果设置为0，将不会 follow 任何重定向</span>
  <span class="nx">maxRedirects</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="c1">// default</span>

  <span class="c1">// `socketPath` 定义了在node.js中使用的一个UNIX Socket. socketPath和proxy只能同时定义一个，同时定义时，优先使用socketPath</span>
<span class="nx">socketPath</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// default</span>

<span class="c1">// `httpAgent` 和 `httpsAgent` 分别在 node.js 中用于定义在执行 http 和 https 时使用的自定义代理。</span>
<span class="nx">httpAgent</span><span class="p">:</span> <span class="k">new</span> <span class="nx">http</span><span class="p">.</span><span class="nx">Agent</span><span class="p">({</span> <span class="na">keepAlive</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}),</span>
<span class="nx">httpsAgent</span><span class="p">:</span> <span class="k">new</span> <span class="nx">https</span><span class="p">.</span><span class="nx">Agent</span><span class="p">({</span> <span class="na">keepAlive</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}),</span>

<span class="c1">// 'proxy' 定义代理服务器的主机名称和端口</span>
<span class="c1">// `auth` 表示 HTTP 基础验证应当用于连接代理，并提供凭据</span>
<span class="nx">proxy</span><span class="p">:</span> <span class="p">{</span>
  <span class="nl">host</span><span class="p">:</span> <span class="dl">'</span><span class="s1">127.0.0.1</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">port</span><span class="p">:</span> <span class="mi">8080</span><span class="p">,</span>
  <span class="nx">auth</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">username</span><span class="p">:</span> <span class="dl">'</span><span class="s1">niffler</span><span class="dl">'</span>
    <span class="nx">password</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1234l</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">},</span>

<span class="c1">// 指定用于取消请求的 cancel token</span>
<span class="nx">cancelToken</span><span class="p">:</span> <span class="k">new</span> <span class="nx">CancelToken</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">cancel</span><span class="p">)</span> <span class="p">{</span> <span class="p">})</span>
<span class="p">}</span>
</code></pre></div></div>
<h3 id="响应结构">响应结构</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
<span class="c1">// 由服务器提供的响应</span>
<span class="nl">data</span><span class="p">:</span> <span class="p">{</span> <span class="p">},</span>

<span class="c1">// 来自服务器响应的 HTTP 状态码</span>
<span class="nx">status</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>

<span class="c1">// 来自服务器响应的 HTTP 状态信息</span>
<span class="nx">statusText</span><span class="p">:</span> <span class="dl">'</span><span class="s1">OK</span><span class="dl">'</span><span class="p">,</span>

<span class="c1">// 服务器响应的头</span>
<span class="nx">headers</span><span class="p">:</span> <span class="p">{</span> <span class="p">},</span>

<span class="c1">// 为请求提供的配置信息</span>
<span class="nx">config</span><span class="p">:</span> <span class="p">{</span> <span class="p">},</span>

<span class="nx">request</span><span class="p">:</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>接收样例：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/Niffler/12345</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusText</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">config</span><span class="p">);</span>
  <span class="p">})</span>
</code></pre></div></div>
<h3 id="配置默认值">配置默认值</h3>
<ul>
  <li>全局的 axios 默认值</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">axios</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">baseURL</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://api.example.com</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">common</span><span class="p">[</span><span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">AUTH_TOKEN</span><span class="p">;</span>
</code></pre></div></div>
<ul>
  <li>自定义实例默认值</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">instance</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">baseURL</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.example.com</span><span class="dl">'</span>
<span class="p">});</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">common</span><span class="p">[</span><span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">AUTH_TOKEN</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="vue-axios基本用法">Vue-axios基本用法</h2>
<h3 id="安装-1">安装</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="n">npm</span> <span class="n">install</span> <span class="o">--</span><span class="n">save</span> <span class="n">axios</span> <span class="n">vue</span><span class="o">-</span><span class="n">axios</span>
</code></pre></div></div>
<p>在main.js页面引用：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Vue</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">axios</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">VueAxios</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue-axios</span><span class="dl">'</span>

<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">VueAxios</span><span class="p">,</span> <span class="nx">axios</span><span class="p">)</span>
</code></pre></div></div>
<p>使用：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Vue</span><span class="p">.</span><span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">api</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
<span class="p">})</span>

<span class="k">this</span><span class="p">.</span><span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">api</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
<span class="p">})</span>

<span class="k">this</span><span class="p">.</span><span class="nx">$http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">api</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>

<h2 id="带cookie请求问题">带cookie请求问题</h2>
<p>axios默认是请求的时候不会带上cookie的，需要通过设置withCredentials: true来解决。</p>

<h2 id="vue-axios-plugin">vue-axios-plugin</h2>
<h3 id="导入">导入</h3>
<ul>
  <li>使用Script</li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 在 vue.js 之后引入 --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/vue"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/vue-axios-plugin"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div></div>
<ul>
  <li>npm 模块引入</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">npm</span> <span class="n">install</span> <span class="o">--</span><span class="n">save</span> <span class="n">vue</span><span class="o">-</span><span class="n">axios</span><span class="o">-</span><span class="n">plugin</span>
</code></pre></div></div>
<p>然后在入口文件配置如下:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Vue</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">Vue</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">VueAxiosPlugin</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue-axios-plugin</span><span class="dl">'</span>

<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">VueAxiosPlugin</span><span class="p">,</span> <span class="p">{</span>
  <span class="c1">// 请求拦截处理</span>
  <span class="na">reqHandleFunc</span><span class="p">:</span> <span class="nx">config</span> <span class="o">=&gt;</span> <span class="nx">config</span><span class="p">,</span>
  <span class="na">reqErrorFunc</span><span class="p">:</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">),</span>
  <span class="c1">// 响应拦截处理</span>
  <span class="na">resHandleFunc</span><span class="p">:</span> <span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">,</span>
  <span class="na">resErrorFunc</span><span class="p">:</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>
<p>在 Vue 组件上添加了 $http 属性, 它默认提供 get 和 post 方法</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">$http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span>
<span class="p">})</span>
<span class="k">this</span><span class="p">.</span><span class="nx">$http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>
<p>也可以通过 this.$axios 来使用 axios 所有的 api 方法</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">$axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span>
<span class="p">})</span>

<span class="k">this</span><span class="p">.</span><span class="nx">$axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>
<h2 id="拦截器">拦截器</h2>
<p>可以截取请求或响应在被 then 或者 catch 处理之前</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//添加请求拦截器</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">config</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//在发送请求之前做某事，比如说 设置loading动画显示</span>
  <span class="k">return</span> <span class="nx">config</span>
<span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//请求错误时做些事</span>
  <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">})</span>

<span class="c1">//添加响应拦截器</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//对响应数据做些事，比如说把loading动画关掉</span>
  <span class="k">return</span> <span class="nx">response</span>
<span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//请求错误时做些事</span>
  <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">})</span>

<span class="c1">//如果不想要这个拦截器也简单，可以删除拦截器</span>
<span class="kd">var</span> <span class="nx">myInterceptor</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span><span class="cm">/*...*/</span><span class="p">})</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">eject</span><span class="p">(</span><span class="nx">myInterceptor</span><span class="p">)</span>
</code></pre></div></div>

            </article>
        </div>
      </div>
    </div>
  </div>
</div>

    
    <footer class="footer" role="contentinfo">
	<div class="container">
		<p class="copyright">Copyright &copy; 2019-2019 <a href="https://sysu-swsad-team.github.io/"><code>sysu-swsad-team</code></a>.</p>
		<p>Powered by <a href="http://jekyllrb.com">Jekyll</a>, themed from <a href="http://lesscss.cn/">Less</a>, refactored by <a href="http://www.hifreud.com/">Freud Kang</a></p>
	</div>
</footer>

<script src="/styles/js/jquery.min.js"></script>
<script src="/styles/js/bootstrap.min.js"></script>
<script src="/styles/js/holder.min.js"></script>
<script src="/styles/js/lessismore.js"></script>
<script src="/styles/js/application.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  </body>
</html>
